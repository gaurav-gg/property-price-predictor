df <- cbind(df,as.data.frame(round(df$Latitude,digits = 4)))
df <- cbind(df,as.data.frame(round(df$Longitude,digits = 4)))
names(df)[12] <- "latitude"
names(df)[13] <- "longitude"
df <- unique(df[c('latitude','longitude')])
if(df[1,1]==0){
df = df[-1,]
}
df <- cbind(df,as.data.frame(paste(df$latitude,',',df$longitude,sep = '')))
names(df)[3] = "location"
poi_df <- data.frame()
final<-GET(urlnear,query=list(keywords=key,refLocation=df$location[12]),add_headers(Authorization=paste(parsed$token_type,parsed$access_token)))
if(final[["status_code"]]==204){
df <- df[-1,]
next
}
parsedfinal<-fromJSON(content(final,"text"),simplifyVector = TRUE)
parsedfinal <- as.data.frame(parsedfinal)
View(parsedfinal)
View(final)
final<-GET(urlnear,query=list(keywords=key,refLocation=df$location[1]),add_headers(Authorization=paste(parsed$token_type,parsed$access_token)))
View(final)
if(final[["status_code"]]!=200){
df <- df[-1,]
next
}
View(final)
final<-GET(urlnear,query=list(keywords=key,refLocation=df$location[1]),add_headers(Authorization=paste(parsed$token_type,parsed$access_token)))
View(final)
View(parsedfinal)
help(rbind)
final<-GET(urlnear,query=list(keywords=key,refLocation=df$location[12]),add_headers(Authorization=paste(parsed$token_type,parsed$access_token)))
parsedfinal<-fromJSON(content(final,"text"),simplifyVector = TRUE)
parsedfinal <- as.data.frame(parsedfinal)
poi_df <- rbind(poi_df,parsedfinal$suggestedLocations.distance,fill = T)
View(poi_df)
View(parsedfinal)
poi_df <- rbind(poi_df,parsedfinal$suggestedLocations.distance,fill = T)
key <- 'hospital'
final<-GET(urlnear,query=list(keywords=key,refLocation=df$location[12]),add_headers(Authorization=paste(parsed$token_type,parsed$access_token)))
if(final[["status_code"]]!=200){
df <- df[-i,]
next
}
parsedfinal<-fromJSON(content(final,"text"),simplifyVector = TRUE)
parsedfinal <- as.data.frame(parsedfinal)
View(parsedfinal)
final<-GET(urlnear,query=list(keywords=key,refLocation='18.538,73.2219'),add_headers(Authorization=paste(parsed$token_type,parsed$access_token)))
if(final[["status_code"]]!=200){
df <- df[-i,]
next
}
parsedfinal<-fromJSON(content(final,"text"),simplifyVector = TRUE)
parsedfinal <- as.data.frame(parsedfinal)
while(nrow(parsedfinal)<10){
parsedfinal <- rbind(parsedfinal,data.frame())
}
while(nrow(parsedfinal)<10){
parsedfinal <- rbind(parsedfinal,NA)
}
View(parsedfinal)
poi_df <- rbind(poi_df,parsedfinal$suggestedLocations.latitude)
poi_df <- rbind(poi_df,parsedfinal$suggestedLocations.longitude)
View(poi_df)
poi_df <- data.frame()
poi_df <- rbind(poi_df,cbind(parsedfinal$suggestedLocations.latitude,parsedfinal$suggestedLocations.longitude))
View(poi_df)
final<-GET(urlnear,query=list(keywords=key,refLocation='18.538,73.2219'),add_headers(Authorization=paste(parsed$token_type,parsed$access_token)))
View(final)
View(final)
final<-GET(urlnear,query=list(keywords=key,refLocation='18.538,73.2219'),add_headers(Authorization=paste(parsed$token_type,parsed$access_token)))
if(final[["status_code"]]!=200){
df <- df[-i,]
next
}
parsedfinal<-fromJSON(content(final,"text"),simplifyVector = TRUE)
parsedfinal <- as.data.frame(parsedfinal)
while(nrow(parsedfinal)<10){
parsedfinal <- rbind(parsedfinal,NA)
}
final<-GET(urlnear,query=list(keywords=key,refLocation=df$location[25]),add_headers(Authorization=paste(parsed$token_type,parsed$access_token)))
if(final[["status_code"]]!=200){
df <- df[-i,]
next
}
parsedfinal<-fromJSON(content(final,"text"),simplifyVector = TRUE)
parsedfinal <- as.data.frame(parsedfinal)
while(nrow(parsedfinal)<10){
parsedfinal <- rbind(parsedfinal,NA)
}
poi_df <- rbind(poi_df,cbind(parsedfinal$suggestedLocations.latitude,parsedfinal$suggestedLocations.longitude))
View(poi_df)
f <- cbind(df[1:2,],poi_df)
View(f)
lat_df <- data.frame()
long_df <- data.frame()
final<-GET(urlnear,query=list(keywords=key,refLocation=df$location[15]),add_headers(Authorization=paste(parsed$token_type,parsed$access_token)))
if(final[["status_code"]]!=200){
df <- df[-i,]
next
}
parsedfinal<-fromJSON(content(final,"text"),simplifyVector = TRUE)
parsedfinal <- as.data.frame(parsedfinal)
while(nrow(parsedfinal)<10){
parsedfinal <- rbind(parsedfinal,NA)
}
lat_df <- rbind(lat_df,parsedfinal$suggestedLocations.latitude)
long_df <- rbind(long_df,parsedfinal$suggestedLocations.longitude)
final<-GET(urlnear,query=list(keywords=key,refLocation=df$location[16]),add_headers(Authorization=paste(parsed$token_type,parsed$access_token)))
if(final[["status_code"]]!=200){
df <- df[-i,]
next
}
parsedfinal<-fromJSON(content(final,"text"),simplifyVector = TRUE)
parsedfinal <- as.data.frame(parsedfinal)
while(nrow(parsedfinal)<10){
parsedfinal <- rbind(parsedfinal,NA)
}
lat_df <- rbind(lat_df,parsedfinal$suggestedLocations.latitude)
long_df <- rbind(long_df,parsedfinal$suggestedLocations.longitude)
f <- cbind(df[(15:16),],lat_df,long_df)
View(f)
View(df)
df <- df[(2:5)]
df <- df[(2:5),]
lat_df <- data.frame()
long_df <- data.frame()
count <- 0
for(i in 1:nrow(df)){
final<-GET(urlnear,query=list(keywords=key,refLocation=df$location[i-count]),add_headers(Authorization=paste(parsed$token_type,parsed$access_token)))
if(final[["status_code"]]==204){
df <- df[-(i-count),]
count <- count+1
next
}
parsedfinal<-fromJSON(content(final,"text"),simplifyVector = TRUE)
parsedfinal <- as.data.frame(parsedfinal)
while(nrow(parsedfinal)<10){
parsedfinal <- rbind(parsedfinal,NA)
}
lat_df <- rbind(lat_df,parsedfinal$suggestedLocations.latitude)
long_df <- rbind(long_df,parsedfinal$suggestedLocations.longitude)
}
df <- cbind(df,lat_df,long_df)
View(df)
city <- 'Mumbai'
df <- read.csv(paste(city,'.csv',sep = ''))
df <- df[,-1]
df <- df[order(df$Latitude, df$Longitude),]
df <- cbind(df,as.data.frame(round(df$Latitude,digits = 4)))
df <- cbind(df,as.data.frame(round(df$Longitude,digits = 4)))
names(df)[12] <- "latitude"
names(df)[13] <- "longitude"
df <- unique(df[c('latitude','longitude')])
if(df[1,1]==0){
df = df[-1,]
}
df <- cbind(df,as.data.frame(paste(df$latitude,',',df$longitude,sep = '')))
names(df)[3] = "location"
city <- 'Mumbai'
df <- read.csv(paste(city,'.csv',sep = ''))
df <- df[,-1]
df <- df[,-(12:18)]
df <- df[order(df$Latitude, df$Longitude),]
df <- cbind(df,as.data.frame(round(df$Latitude,digits = 4)))
df <- cbind(df,as.data.frame(round(df$Longitude,digits = 4)))
names(df)[12] <- "latitude"
names(df)[13] <- "longitude"
df <- unique(df[c('latitude','longitude')])
if(df[1,1]==0){
df = df[-1,]
}
df <- cbind(df,as.data.frame(paste(df$latitude,',',df$longitude,sep = '')))
names(df)[3] = "location"
lat_df <- data.frame()
long_df <- data.frame()
View(df)
View(df)
source('~/.active-rstudio-document', echo=TRUE)
latlong <- read.csv('cities_latlong.csv')
View(latlong)
View(latlong)
library(dplyr)
latlong1 <- select(latlong,cities==city)
latlong1 <- select(latlong,latlong$cities==city)
latlong1 <- filter(latlong,latlong$cities==city)
View(latlong1)
View(df)
library(httr)
library(jsonlite)
library(dplyr)
urloauth <- 'https://outpost.mapmyindia.com/api/security/oauth/token'
gt<-"client_credentials"
cid<-"92UWRtWgOX6Va_QMC4jG62LO09ZG0-Q1FuStTmpnpmk="
csecret<-"6G0FALtSaYAAIRcm3eLeo5oHDGEr4lLmx_lZeeUNH30="
CT<-"application/x-www-form-urlencoded"
response <- POST(urloauth,query = list(grant_type=gt,client_id=cid,client_secret=csecret),add_headers(Content_type=CT))
parsed<-fromJSON(content(response,"text"),simplifyVector = FALSE)
urlnear<-"https://atlas.mapmyindia.com/api/places/nearby/json?"
latlong <- read.csv('cities_latlong.csv')
city_list <- list("Bangalore","Mumbai","Delhi","Pune","Chennai","Hyderabad","Kolkata","Ahmedabad")
pois <- list("airport","atm","bank","bus stop","hospital","restaurant","school","shopping mall","station")
key <- 'hospital'
city <- 'Mumbai'
df <- read.csv(paste(city,'.csv',sep = ''))
df <- df[,-1]
df <- df[,-(12:18)]
df <- df[order(df$Latitude, df$Longitude),]
df <- cbind(df,as.data.frame(round(df$Latitude,digits = 4)))
df <- cbind(df,as.data.frame(round(df$Longitude,digits = 4)))
names(df)[12] <- "latitude"
names(df)[13] <- "longitude"
df <- unique(df[c('latitude','longitude')])
if(df[1,1]==0){
df = df[-1,]
}
df <- cbind(df,as.data.frame(paste(df$latitude,',',df$longitude,sep = '')))
names(df)[3] = "location"
View(df)
df <- removeIrregular(df)
library(httr)
library(jsonlite)
library(dplyr)
urloauth <- 'https://outpost.mapmyindia.com/api/security/oauth/token'
gt<-"client_credentials"
cid<-"92UWRtWgOX6Va_QMC4jG62LO09ZG0-Q1FuStTmpnpmk="
csecret<-"6G0FALtSaYAAIRcm3eLeo5oHDGEr4lLmx_lZeeUNH30="
CT<-"application/x-www-form-urlencoded"
response <- POST(urloauth,query = list(grant_type=gt,client_id=cid,client_secret=csecret),add_headers(Content_type=CT))
parsed<-fromJSON(content(response,"text"),simplifyVector = FALSE)
urlnear<-"https://atlas.mapmyindia.com/api/places/nearby/json?"
latlong <- read.csv('cities_latlong.csv')
city_list <- list("Bangalore","Mumbai","Delhi","Pune","Chennai","Hyderabad","Kolkata","Ahmedabad")
pois <- list("airport","atm","bank","bus stop","hospital","restaurant","school","shopping mall","station")
removeIrregular <- function(x){
latlong1 <- filter(latlong,latlong$cities==city)
count <- 0
for(i in 1:nrow(df)){
if(abs(df[i-count,1]-latlong1$lat[1])>2){
df <- df[-(i-count),]
count <- count+1
}
if(abs(df[i-count]-latlong$long[1])>2){
df <- df[-(i-count),]
count <- count+1
}
}
return(df)
}
key <- 'hospital'
city <- 'Mumbai'
df <- read.csv(paste(city,'.csv',sep = ''))
df <- df[,-1]
df <- df[,-(12:18)]
df <- df[order(df$Latitude, df$Longitude),]
df <- cbind(df,as.data.frame(round(df$Latitude,digits = 4)))
df <- cbind(df,as.data.frame(round(df$Longitude,digits = 4)))
names(df)[12] <- "latitude"
names(df)[13] <- "longitude"
df <- unique(df[c('latitude','longitude')])
if(df[1,1]==0){
df = df[-1,]
}
df <- cbind(df,as.data.frame(paste(df$latitude,',',df$longitude,sep = '')))
names(df)[3] = "location"
df <- removeIrregular(df)
i
city <- 'Mumbai'
df <- read.csv(paste(city,'.csv',sep = ''))
df <- df[,-1]
df <- df[order(df$Latitude, df$Longitude),]
df <- cbind(df,as.data.frame(round(df$Latitude,digits = 4)))
df <- cbind(df,as.data.frame(round(df$Longitude,digits = 4)))
df <- read.csv(paste(city,'.csv',sep = ''))
df <- df[,-1]
df <- df[,-(12:18)]
df <- df[order(df$Latitude, df$Longitude),]
df <- cbind(df,as.data.frame(round(df$Latitude,digits = 4)))
df <- cbind(df,as.data.frame(round(df$Longitude,digits = 4)))
names(df)[12] <- "latitude"
names(df)[13] <- "longitude"
df <- unique(df[c('latitude','longitude')])
if(df[1,1]==0){
df = df[-1,]
}
df <- cbind(df,as.data.frame(paste(df$latitude,',',df$longitude,sep = '')))
names(df)[3] = "location"
df <- removeIrregular(df)
latlong1 <- filter(latlong,latlong$cities==city)
latlong1$lat[1]
latlong1$lat
city <- 'Mumbai'
df <- read.csv(paste(city,'.csv',sep = ''))
df <- df[,-1]
df <- df[,-(12:18)]
df <- df[order(df$Latitude, df$Longitude),]
df <- cbind(df,as.data.frame(round(df$Latitude,digits = 4)))
df <- cbind(df,as.data.frame(round(df$Longitude,digits = 4)))
names(df)[12] <- "latitude"
names(df)[13] <- "longitude"
df <- unique(df[c('latitude','longitude')])
if(df[1,1]==0){
df = df[-1,]
}
df <- cbind(df,as.data.frame(paste(df$latitude,',',df$longitude,sep = '')))
names(df)[3] = "location"
df <- removeIrregular(df)
removeIrregular <- function(x){
latlong1 <- filter(latlong,latlong$cities==city)
count <- 0
for(i in 1:nrow(x)){
if(abs(x[i-count,1]-latlong1$lat)>2){
x <- x[(i-count),]
count <- count+1
}
if(abs(x[i-count,1]-latlong$long)>2){
x <- x[-(i-count),]
count <- count+1
}
}
return(x)
}
df <- removeIrregular(df)
x <-df
removeIrregular <- function(x){
latlong1 <- filter(latlong,latlong$cities==city)
count <- 0
for(i in 1:nrow(x)){
if(abs(x[i-count,1]-latlong1$lat)>2){
x <- x[-(i-count),]
count <- count+1
}
if(abs(x[i-count,1]-latlong$long)>2){
x <- x[-(i-count),]
count <- count+1
}
}
return(x)
}
df <- removeIrregular(df)
x <-df
latlong1 <- filter(latlong,latlong$cities==city)
count <- 0
x <-df
if(abs(x[1,1]-latlong1$lat)>2){
x <- x[-(1),]
count <- count+1
}
View(x)
View(df)
if(abs(x[1,1]-latlong$long)>2){
x <- x[-(1),]
count <- count+1
}
View(x)
library(httr)
library(jsonlite)
library(dplyr)
urloauth <- 'https://outpost.mapmyindia.com/api/security/oauth/token'
gt<-"client_credentials"
cid<-"92UWRtWgOX6Va_QMC4jG62LO09ZG0-Q1FuStTmpnpmk="
csecret<-"6G0FALtSaYAAIRcm3eLeo5oHDGEr4lLmx_lZeeUNH30="
CT<-"application/x-www-form-urlencoded"
response <- POST(urloauth,query = list(grant_type=gt,client_id=cid,client_secret=csecret),add_headers(Content_type=CT))
parsed<-fromJSON(content(response,"text"),simplifyVector = FALSE)
urlnear<-"https://atlas.mapmyindia.com/api/places/nearby/json?"
latlong <- read.csv('cities_latlong.csv')
city_list <- list("Bangalore","Mumbai","Delhi","Pune","Chennai","Hyderabad","Kolkata","Ahmedabad")
pois <- list("airport","atm","bank","bus stop","hospital","restaurant","school","shopping mall","station")
removeIrregular <- function(x){
latlong1 <- filter(latlong,latlong$cities==city)
count <- 0
for(i in 1:nrow(x)){
if(abs(x[i-count,1]-latlong1$lat)>2 || abs(x[i-count,1]-latlong$long)>2){
x <- x[-(i-count),]
count <- count+1
}
}
return(x)
}
key <- 'hospital'
city <- 'Mumbai'
df <- read.csv(paste(city,'.csv',sep = ''))
df <- df[,-1]
df<- df[,-(12:18)]
df <- df[order(df$Latitude, df$Longitude),]
df <- cbind(df,as.data.frame(round(df$Latitude,digits = 4)))
df <- cbind(df,as.data.frame(round(df$Longitude,digits = 4)))
names(df)[12] <- "latitude"
names(df)[13] <- "longitude"
df <- unique(df[c('latitude','longitude')])
if(df[1,1]==0){
df = df[-1,]
}
df <- cbind(df,as.data.frame(paste(df$latitude,',',df$longitude,sep = '')))
names(df)[3] = "location"
df <- removeIrregular(df)
df <- read.csv(paste(city,'.csv',sep = ''))
df <- df[,-1]
df <- df[,-(12:18)]
df <- df[order(df$Latitude, df$Longitude),]
df <- cbind(df,as.data.frame(round(df$Latitude,digits = 4)))
df <- cbind(df,as.data.frame(round(df$Longitude,digits = 4)))
names(df)[12] <- "latitude"
names(df)[13] <- "longitude"
df <- unique(df[c('latitude','longitude')])
if(df[1,1]==0){
df = df[-1,]
}
df <- cbind(df,as.data.frame(paste(df$latitude,',',df$longitude,sep = '')))
names(df)[3] = "location"
View(df)
latlong1 <- filter(latlong,latlong$cities==city)
latlong1$lat
abs(df[6,1]-latlong1$lat)>2
abs(df[6,1]-latlong1$long)>2
latlong1$long
library(httr)
library(jsonlite)
library(dplyr)
urloauth <- 'https://outpost.mapmyindia.com/api/security/oauth/token'
gt<-"client_credentials"
cid<-"92UWRtWgOX6Va_QMC4jG62LO09ZG0-Q1FuStTmpnpmk="
csecret<-"6G0FALtSaYAAIRcm3eLeo5oHDGEr4lLmx_lZeeUNH30="
CT<-"application/x-www-form-urlencoded"
response <- POST(urloauth,query = list(grant_type=gt,client_id=cid,client_secret=csecret),add_headers(Content_type=CT))
parsed<-fromJSON(content(response,"text"),simplifyVector = FALSE)
urlnear<-"https://atlas.mapmyindia.com/api/places/nearby/json?"
latlong <- read.csv('cities_latlong.csv')
city_list <- list("Bangalore","Mumbai","Delhi","Pune","Chennai","Hyderabad","Kolkata","Ahmedabad")
pois <- list("airport","atm","bank","bus stop","hospital","restaurant","school","shopping mall","station")
removeIrregular <- function(x){
latlong1 <- filter(latlong,latlong$cities==city)
count <- 0
for(i in 1:nrow(x)){
if(abs(x[i-count,1]-latlong1$lat)>2 || abs(x[i-count,2]-latlong1$long)>2){
x <- x[-(i-count),]
count <- count+1
}
}
return(x)
}
key <- 'hospital'
city <- 'Mumbai'
df <- read.csv(paste(city,'.csv',sep = ''))
df <- df[,-1]
df <- df[,-(12:18\)]
df <- df[,-(12:18)]
df <- df[order(df$Latitude, df$Longitude),]
df <- cbind(df,as.data.frame(round(df$Latitude,digits = 4)))
df <- cbind(df,as.data.frame(round(df$Longitude,digits = 4)))
names(df)[12] <- "latitude"
names(df)[13] <- "longitude"
df <- unique(df[c('latitude','longitude')])
if(df[1,1]==0){
df = df[-1,]
}
df <- cbind(df,as.data.frame(paste(df$latitude,',',df$longitude,sep = '')))
names(df)[3] = "location"
df <- removeIrregular(df)
latlong1 <- filter(latlong,latlong$cities==city)
count <- 0
abs(df[1,1]-latlong1$lat)>2
abs(df[6,1]-latlong1$lat)>2
abs(df[6,2]-latlong1$long)>2
abs(df[1,2]-latlong1$long)>2
is.na(df$latitude)
any(is.na(df$latitude))
any(is.na(df$longitude))
library(httr)
library(jsonlite)
library(dplyr)
urloauth <- 'https://outpost.mapmyindia.com/api/security/oauth/token'
gt<-"client_credentials"
cid<-"92UWRtWgOX6Va_QMC4jG62LO09ZG0-Q1FuStTmpnpmk="
csecret<-"6G0FALtSaYAAIRcm3eLeo5oHDGEr4lLmx_lZeeUNH30="
CT<-"application/x-www-form-urlencoded"
response <- POST(urloauth,query = list(grant_type=gt,client_id=cid,client_secret=csecret),add_headers(Content_type=CT))
parsed<-fromJSON(content(response,"text"),simplifyVector = FALSE)
urlnear<-"https://atlas.mapmyindia.com/api/places/nearby/json?"
latlong <- read.csv('cities_latlong.csv')
city_list <- list("Bangalore","Mumbai","Delhi","Pune","Chennai","Hyderabad","Kolkata","Ahmedabad")
pois <- list("airport","atm","bank","bus stop","hospital","restaurant","school","shopping mall","station")
removeIrregular <- function(x){
latlong1 <- filter(latlong,latlong$cities==city)
count <- 0
for(i in 1:nrow(x)){
if(abs(x[i-count,1]-latlong1$lat)>2 || abs(x[i-count,2]-latlong1$long)>2){
x <- x[-(i-count),]
count <- count+1
}
}
return(x)
}
key <- 'hospital'
city <- 'Mumbai'
df <- read.csv(paste(city,'.csv',sep = ''))
df <- df[,-1]
df <- df[,-(12:18)]
df <- df[order(df$Latitude, df$Longitude),]
df <- cbind(df,as.data.frame(round(df$Latitude,digits = 4)))
df <- cbind(df,as.data.frame(round(df$Longitude,digits = 4)))
names(df)[12] <- "latitude"
names(df)[13] <- "longitude"
df <- unique(df[c('latitude','longitude')])
if(df[1,1]==0){
df = df[-1,]
}
df <- filter(df,!is.na(df$latitude),!is.na(df$longitude))
df <- cbind(df,as.data.frame(paste(df$latitude,',',df$longitude,sep = '')))
names(df)[3] = "location"
df <- removeIrregular(df)
